<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/result.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/tema.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/style.css') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitPulse ‚Äî Resultado</title>
</head>
<body>
    <button id="trocar-tema">trocar tema</button>

    <h1>Git<span class="destaque">Pulse</span></h1>

    <h2>Resultado para "{{ username }}"</h2>

    <div class="summary">
        <h3>Resumo do Usu√°rio</h3>
        <ul>
            <li>Reposit√≥rios p√∫blicos: {{ public_repos }}</li>
            <li>Seguidores: {{ followers }}</li>
        </ul>
    </div>

    <div class="info">
        <h3>Reposit√≥rios</h3>

        {% if repos %}
            <ul>
                {% for repo in repos %}
                    <li>
                        <strong>{{ repo.name }}</strong>
                        {% if repo.language %}
                            ‚Äî {{ repo.language }}
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Este usu√°rio n√£o possui reposit√≥rios p√∫blicos.</p>
        {% endif %}

        <h3>Linguagens mais usadas</h3>

        {% if languages %}
            <ul>
                {% for lang, count in languages.items() %}
                    <li>{{ lang }}: {{ count }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>N√£o foi poss√≠vel identificar linguagens.</p>
        {% endif %}

        <h3>Linguagens por volume de c√≥digo</h3>

        {% if languages_by_bytes %}
            <ul>
                {% for lang, bytes in languages_by_bytes.items() %}
                    <li>{{ lang }}: {{ bytes }} bytes</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>N√£o foi poss√≠vel calcular os volumes.</p>
        {% endif %}

        <h3>Distribui√ß√£o de linguagens (%)</h3>

        {% if language_percentages %}
            <ul>
                {% for lang, percent in language_percentages.items() %}
                    <li>{{ lang }} ‚Äî {{ percent }}%</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>N√£o foi poss√≠vel calcular os percentuais.</p>
        {% endif %}

        <select id="chartType">
            <option value="bar">Gr√°fico de Barras</option>
            <option value="pie">Gr√°fico de Pizza</option>
            <option value="doughnut">Rosquinha </option>
        </select>

        <canvas id="languageChart"></canvas>
    </div>

    <br>

    <a href="/">‚Üê Analisar outro usu√°rio</a>

    <a href="/download/pdf/{{ username }}">
        üìÑ Baixar relat√≥rio em PDF
    </a>
  
    {% if language_percentages %}
    <script>
        window.languageLabels = {{ language_percentages.keys() | list | tojson }};
        window.languageData = {{ language_percentages.values() | list | tojson }};
    </script>
    {% endif %}

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='JS/chart.js') }}"></script>
    <script src="{{ url_for('static', filename='JS/tema.js') }}"></script>

</body>
</html>
